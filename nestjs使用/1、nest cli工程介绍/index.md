## next cli 安装

[00:00:00.366-00:00:01.666]哈喽，各位观众朋友们大家好
[00:00:01.666-00:00:04.866]今天我们来学习这个nestjs的第五章啊
[00:00:04.866-00:00:07.566]认识这个nestjs的脚手架cli
[00:00:07.866-00:00:09.566]OK那第一步的话
[00:00:09.566-00:00:11.766]我们就需要先要安装一下这个cli
[00:00:11.800-00:00:13.066]大家直接把这个命令给它
[00:00:13.066-00:00:14.099]复制一下就可以了
[00:00:14.200-00:00:15.766]那或者你在网上直接查一下
[00:00:16.100-00:00:17.966]就是npm install -g
[00:00:17.966-00:00:20.466]@nestjs/cli就可以了
[00:00:20.600-00:00:23.133]OK,我们打开这个终端
[00:00:23.533-00:00:25.499]cmd或者是powershell都可以
[00:00:26.900-00:00:28.400]对我们把这个打开
[00:00:28.400-00:00:30.066]然后直接装一下就可以了
[00:00:30.200-00:00:32.000]那因为我已经装过了我就不再装了
[00:00:32.000-00:00:34.300]对大家直接回车运行一下就好了
[00:00:34.500-00:00:36.200]那装完之后我们就可以通过
[00:00:36.400-00:00:38.666]nest这个命令去创建一个项目了

## 创建nestjs项目

[00:00:38.666-00:00:40.466]直接使用nest new
[00:00:40.533-00:00:42.066]然后比如说我们来一个demo
[00:00:42.400-00:00:44.266]OK通过这个命令去创建就好了
[00:00:44.700-00:00:45.733]我们稍微等一下
[00:00:46.366-00:00:47.466]那这时候就
[00:00:47.466-00:00:50.299]选择你使用这个包版包管理工具
[00:00:50.533-00:00:52.799]啊随便啊我这先用npm了
[00:00:52.800-00:00:56.100]对大家可以使用yarn或者是pnpm都可以
[00:00:57.066-00:00:58.533]那这个的话可能是稍微有点慢
[00:00:58.533-00:01:00.299]对第一次装的话有点慢
[00:01:00.533-00:01:01.733]那稍微等一下就行了
[00:01:01.733-00:01:03.466]那我给大家直接就剪掉了
[00:01:03.466-00:01:04.266]好吧
[00:01:04.900-00:01:05.700]later
[00:01:05.866-00:01:07.799]OK那我们已经把它放到这个
[00:01:07.800-00:01:08.733]vsocde里边了

## nestjs项目目录结构

[00:01:08.733-00:01:10.533]然后我们来看一下它的目录结构啊
[00:01:10.733-00:01:11.666]主要是src
[00:01:11.666-00:01:13.666]下面这个test的话是做这个
[00:01:13.866-00:01:14.599]单元测试的
[00:01:14.600-00:01:15.400]就这个test
[00:01:15.400-00:01:16.533]对我们现在不用管
[00:01:16.666-00:01:18.133]我们来看它这个入口文件
[00:01:18.133-00:01:19.333]就这个main.ts
[00:01:19.700-00:01:22.800]对这个那他创建一个函数叫bootstrap
[00:01:22.800-00:01:26.200]然后通过他这个NestFactory去创建了
[00:01:26.200-00:01:27.266]一个AppModule
[00:01:27.366-00:01:29.966]那这个AppModule你可以理解成咱们这个
[00:01:30.333-00:01:32.499]呃vue里边这个AppModule
[00:01:32.700-00:01:34.666]对相当于一个主的一个入口文件
[00:01:34.666-00:01:37.666]OK我们来看一下这个AppModule
[00:01:37.666-00:01:39.733]也就是在也就是在这对
[00:01:39.733-00:01:40.666]我们点进来
[00:01:40.800-00:01:43.366]那它使用一个装饰器就是@Module
[00:01:43.366-00:01:44.933]这是一个类装饰器对
[00:01:44.933-00:01:46.899]去修饰这个AppModule
[00:01:47.366-00:01:48.899]那是前两章我们已经讲过了
[00:01:48.900-00:01:51.200]对它的内部呢会处理些事情
[00:01:51.266-00:01:53.066]把这些东西呢给它注入进去
[00:01:53.133-00:01:56.133]你也可以把它理解成是一个容器
[00:01:56.133-00:01:57.666]就我们之前讲的那个
[00:01:57.733-00:01:59.666]ioc控制反转那个东西
[00:01:59.700-00:02:02.300]对然后在它里面有这个Controller
[00:02:02.700-00:02:03.800]还有一个providers
[00:02:04.133-00:02:05.199]这个是一个服务类
[00:02:05.200-00:02:06.700]这是一个controller的话
[00:02:06.700-00:02:08.366]你可以把它理解成咱们那个
[00:02:08.666-00:02:10.466]vue里边那个路由对
[00:02:10.466-00:02:12.666]这个里边主要的话就是配置路由的
[00:02:12.766-00:02:13.933]就是这个controller
[00:02:14.133-00:02:15.933]我们可以运行给大家看一下啊
[00:02:16.400-00:02:18.500]运行的话你打开这个package.json
[00:02:18.533-00:02:20.366]对我们一般运行的是这个

## nest项目启动

[00:02:20.866-00:02:23.999]star star dev这个因为它有--watch
[00:02:24.300-00:02:26.566]对就是我们这个文件一有改变的话
[00:02:26.566-00:02:29.066]它会自动帮我们去这个做这个重启的
[00:02:29.066-00:02:30.566]所以说我们来运行这个就可以了
[00:02:31.300-00:02:32.500]OK我们再稍等一下
[00:02:36.933-00:02:38.933]OK出来这个绿色的这
[00:02:38.933-00:02:40.099]这一这一坨东西呢
[00:02:40.100-00:02:41.566]就说明这个运行成功了
[00:02:41.733-00:02:44.566]然后它的端口是这个3000对就这个
[00:02:44.700-00:02:46.766]然后我们就可以通过localhost的3000
[00:02:46.766-00:02:47.766]去访问一下了
[00:02:52.000-00:02:54.300]对大家可以看到这个hello word就输出了
[00:02:54.666-00:02:57.166]hello word的话是在这个controller对在这
[00:02:57.300-00:02:59.766]然后他去调用了一个
[00:02:59.800-00:03:01.966]this.appService.gethello啊
[00:03:01.966-00:03:04.199]这是一个服务类对就是这个service
[00:03:04.533-00:03:06.133]那这的话返回这个

## 修改项目

[00:03:06.366-00:03:08.666]hello word对这的话我们可以改一下
[00:03:08.866-00:03:09.733]改成什么
[00:03:10.366-00:03:11.299]小满最骚
[00:03:12.100-00:03:12.900]OK
[00:03:12.933-00:03:16.099]然后呢刷新一下啊这的话也就变了啊
[00:03:16.100-00:03:17.366]也是没有什么问题的
[00:03:17.666-00:03:18.599]然后这个路由的话
[00:03:18.600-00:03:21.166]你可以自己添加这个地址啊
[00:03:21.166-00:03:23.533]就是比如说来一个get
[00:03:24.133-00:03:26.099]然后这叫什么hello
[00:03:31.100-00:03:31.700]OK
[00:03:31.700-00:03:33.800]那这样的话它这个地址的话它就变了
[00:03:33.800-00:03:35.766]这样的话我们再刷新一下就返不到了
[00:03:35.933-00:03:36.799]它就找不到了
[00:03:37.066-00:03:40.266]所以说我们后面得加一个/get/hello
[00:03:41.866-00:03:43.366]哎这样子又变回去了
[00:03:43.400-00:03:44.000]所以说
[00:03:44.000-00:03:47.866]通过这个controller来控制它这个路由的OK
[00:03:48.100-00:03:49.533]然后这个service呢
[00:03:49.900-00:03:52.966]service的话它这里写了一个private redonly
[00:03:52.966-00:03:54.466]还有这个APPservice
[00:03:54.800-00:03:55.866]其实这一段代码
[00:03:55.866-00:03:57.566]就是写的一个依赖注入
[00:03:57.766-00:03:58.999]他是一个私有的
[00:03:59.000-00:04:01.800]并且是不可以修改的一个APPservice
[00:04:01.800-00:04:02.200]就是
[00:04:02.200-00:04:04.600]我们不需要去给他做这个实例化
[00:04:04.600-00:04:06.000]就是不需要给他去new
[00:04:06.333-00:04:09.199]等于他自己的内部会去做一些操作的
[00:04:09.300-00:04:11.600]就我们把它注入到这个类里边
[00:04:11.600-00:04:14.066]就可以使用它里面一些方法
[00:04:14.366-00:04:15.066]就是这个
[00:04:15.066-00:04:17.133]直接通过类似点APPservice
[00:04:17.300-00:04:18.266]就可以使用了
[00:04:18.366-00:04:18.866]因为什么
[00:04:18.866-00:04:21.366]因为我们之前讲过那个IOC控制反转
[00:04:21.366-00:04:22.199]这那一块
[00:04:22.266-00:04:25.199]就已经帮我们去做了那个实力化了
[00:04:25.200-00:04:26.700]所以说我们直接通过这种方式
[00:04:26.700-00:04:27.600]就可以调到它里面
[00:04:27.600-00:04:30.100]这个方法就是这个get.hello
[00:04:30.900-00:04:32.266]对然后我们也可以
[00:04:32.766-00:04:34.966]新增就比如说get什么小满
[00:04:38.400-00:04:39.700]然后我直接return
[00:04:40.333-00:04:41.899]小满OK
[00:04:42.200-00:04:45.133]那这儿的话也就直接可以去使用了啊
[00:04:45.133-00:04:45.966]也是没有问题的
[00:04:45.966-00:04:47.999]我们刷新一下小满
[00:04:48.066-00:04:50.066]对就是在这个service里边
[00:04:50.066-00:04:51.733]主要是写我们这个业务逻辑的
[00:04:51.733-00:04:53.566]你的业务逻辑都会写在这个
[00:04:53.866-00:04:54.733]service里边
[00:04:55.200-00:04:56.000]那么这业务逻辑
[00:04:56.000-00:04:57.566]不可以写在这个路由里边的吧
[00:04:57.566-00:04:58.533]也是可以的
[00:04:58.600-00:05:01.066]但是你如果写在这个路由里边的话
[00:05:01.100-00:05:03.166]你需要通过这个控制区去访问
[00:05:03.300-00:05:05.566]就是你还要加这个什么get什么hello
[00:05:05.566-00:05:07.199]他就成了这个单一的了
[00:05:07.500-00:05:10.200]没有办法去做这个复用了
[00:05:10.366-00:05:12.533]复用的话你需要写在这个service里边
[00:05:12.533-00:05:14.799]对比如说我还有别的控制区去享用
[00:05:14.900-00:05:16.466]那我直接导入来注入一下
[00:05:16.466-00:05:17.499]他不就能用了吗
[00:05:17.600-00:05:18.700]是吧OK
[00:05:18.700-00:05:19.266]以上的话
[00:05:19.266-00:05:20.933]就是一个目录结构这个介绍

```experiment
{
  "title": "请打开Shell工具输入 npm i -g @nestjs/cli ",
  "tool": "shell"
}
```{{active 00:00:31}}


```experiment
{
  "title": "请打开Shell工具输入 nest new demo",
  "tool": "shell"
}
```{{active 00:00:43}}


```question
{
  "category": "radio",
  "title": "您会使用哪种包管理工具",
  "options": [
    {
      "key": "A",
      "value": "npm"
    },
    {
      "key": "B",
      "value": "yarn"
    }
  ],
  "selected": "A"
}
```{{active 00:00:50}}


```validate
{
  "title": "请打开资源管理器中创建好的项目",
  "tool": "file",
  "params": {
    "path":"/index.js"
  }
}
```{{active 00:01:23}}


```experiment
{
  "title": "请打开Shell工具输入npm run start",
  "tool": "shell"
}
```{{active 00:02:32}}

```question
{
  "category": "checkbox",
  "title": "您觉得此次课程讲的怎么样",
  "options": [
    {
      "key": "A",
      "value": "垃圾"
    },
     {
      "key": "B",
      "value": "一般"
    },
     {
      "key": "C",
      "value": "比较好"
    },
    {
      "key": "D",
      "value": "非常好"
    }
  ],
  "selected": "B,C"
}
```{{active 00:05:10}}
 