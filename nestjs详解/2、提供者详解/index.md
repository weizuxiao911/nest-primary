[00:00:00.333-00:00:01.533]hello各位观众朋友们大家好
[00:00:01.533-00:00:03.333]今天我们来讲一下这个nestjs
[00:00:03.333-00:00:07.333]第10章 nextjs的提供者也就是这个providers
[00:00:08.200-00:00:10.766]OK那我们先来看一下它的基本用法
[00:00:10.766-00:00:12.766]那其实是非常简单的
[00:00:12.900-00:00:15.266]就是在这个APP service里边
[00:00:15.333-00:00:16.499]那定义了一个类
[00:00:16.566-00:00:18.166]然后呢使用这个银阶格的拨呢
[00:00:18.166-00:00:19.933]去给他做了一个修饰
[00:00:20.366-00:00:21.299]修饰完之后呢
[00:00:21.300-00:00:24.566]在这个appmodels里边又做了一个导入
[00:00:24.700-00:00:27.066]然后给它注入到这个providers里边
[00:00:27.400-00:00:28.666]注入到providers里边呢
[00:00:28.666-00:00:31.266]就可以在Controller去使用这个服务了
[00:00:31.400-00:00:33.100]我们来看一下就是这
[00:00:33.166-00:00:35.166]那使用这种依赖注入的方式
[00:00:35.366-00:00:36.499]然后这个类型的话
[00:00:36.500-00:00:38.766]还是我们这个Appseries的一个类型
[00:00:38.766-00:00:40.966]这个名字的话是可以随便起的
[00:00:40.966-00:00:42.766]对不重要啊
[00:00:42.766-00:00:45.199]然后他大概逻辑其实是这样子的
[00:00:45.200-00:00:46.733]我们来简单的画个图
[00:00:51.700-00:00:52.100]OK
[00:00:52.100-00:00:55.066]那这个的话就是我们这个符类有这个
[00:00:55.900-00:00:58.000]ABC啊有很多东西
[00:00:58.100-00:01:01.266]然后这儿的话是这个Controller
[00:01:02.933-00:01:02.999]呃
[00:01:03.000-00:01:06.100]中间的话是我们这个IOC的这个容器
[00:01:06.333-00:01:07.866]在这个容器里面有一个key
[00:01:07.866-00:01:08.933]value的一个关系
[00:01:08.933-00:01:10.966]它的key呢就是这个类型
[00:01:11.066-00:01:12.899]就是这个APP Swiss的一个类型
[00:01:13.166-00:01:15.266]然后value呢就是这个符类
[00:01:15.266-00:01:17.066]就是我们那个service
[00:01:17.266-00:01:17.866]对
[00:01:17.866-00:01:20.333]所以说它是有有这样一个绑定关系的
[00:01:20.533-00:01:22.933]然后我们又在这个controller里边呢
[00:01:22.933-00:01:24.466]给它传入这个类型
[00:01:24.533-00:01:26.933]就是在这a constructor
[00:01:31.000-00:01:33.200]那construct把这个类型呢给它去传进去
[00:01:33.200-00:01:34.366]比如说这叫a
[00:01:34.666-00:01:36.566]然后他就通过这个类型呢
[00:01:36.600-00:01:38.666]去这个容器里边找对应的k
[00:01:38.800-00:01:39.866]然后呢k呢就去
[00:01:39.866-00:01:40.966]找这个对应的类
[00:01:41.133-00:01:42.699]然后把这个类呢实力化
[00:01:42.700-00:01:43.666]经过处理呢
[00:01:43.666-00:01:45.866]再返给我们这个control着他
[00:01:45.866-00:01:48.333]大概流程呢就是这样子的OK
[00:01:48.600-00:01:50.500]所以说我们在这直接使用这个
[00:01:50.566-00:01:51.799]类似点APS
[00:01:51.800-00:01:53.700]直接就可以调他里面的一些方法
[00:01:53.700-00:01:56.500]不需要我们去做这个手动的实力化
[00:01:56.500-00:01:58.700]那他在内部呢已经帮我们做了这个
[00:01:58.933-00:01:59.866]实力化OK
[00:02:00.266-00:02:01.066]那以上的话
[00:02:01.066-00:02:02.733]就是一个最简单的一个so s
[00:02:02.733-00:02:04.133]一个模型OK
[00:02:04.333-00:02:06.199]然后我们来看看这个第二个
[00:02:07.300-00:02:10.000]第二个的话是这个自定义名称OK
[00:02:10.166-00:02:11.766]我们打开这个Mojo
[00:02:12.866-00:02:14.666]对我们可以看到它是在这个
[00:02:14.866-00:02:16.399]private里面去注入的
[00:02:16.566-00:02:19.366]然后这是一个这其实是一个简写
[00:02:19.466-00:02:20.733]我们来看一下它的全称
[00:02:20.733-00:02:22.266]它的全称其实是这样写
[00:02:22.266-00:02:24.499]这样写的是一个对象
[00:02:24.566-00:02:25.666]然后一个private
[00:02:27.600-00:02:29.100]然后对应的类呢
[00:02:29.800-00:02:32.766]对应的类叫这个user color啊
[00:02:32.766-00:02:35.766]user class就是这个AP Swiss
[00:02:37.300-00:02:38.933]OK然后这个名字呢
[00:02:38.933-00:02:40.799]其实你是可以随便起的
[00:02:40.900-00:02:42.600]比如说我叫ABC也可以
[00:02:42.700-00:02:44.800]那起完之后呢我们把这个给它删掉啊
[00:02:46.133-00:02:48.166]发现保存之后呢会有一个报错
[00:02:48.366-00:02:50.099]因为这个名字呢对应不上了
[00:02:50.100-00:02:51.600]他找不到这个类了
[00:02:51.866-00:02:53.099]所以说我们在Ctrl里边
[00:02:53.100-00:02:54.600]需要给他做一下修饰
[00:02:54.733-00:02:56.366]使用这个inject
[00:02:57.066-00:02:58.599]它是一个装饰器啊
[00:03:00.300-00:03:01.600]然后把这个名字给他传进去
[00:03:01.600-00:03:04.466]可以这样的话让他去重新识别这个
[00:03:04.666-00:03:06.066]private OK
[00:03:06.366-00:03:07.899]这样的效果是一样的
[00:03:07.900-00:03:12.000]只不过一个是简写一个是全称OK
[00:03:12.000-00:03:14.200]我们来看一下这个效果啊
[00:03:14.200-00:03:15.733]是一样的没有什么问题
[00:03:16.100-00:03:17.533]当我们平时开发中的
[00:03:17.533-00:03:18.666]使用这种简写的方
[00:03:18.666-00:03:19.466]式比较多
[00:03:19.500-00:03:21.266]因为这种方式写起来的话
[00:03:21.366-00:03:22.566]非常非常麻烦
[00:03:22.566-00:03:25.533]OK这是我们第二个自定义名称
[00:03:25.533-00:03:28.766]然后我们来看第三个自定义注入值
[00:03:28.900-00:03:31.100]OK还是在这个APM Mojo里边
[00:03:33.366-00:03:35.699]然后呢还是通过这个private
[00:03:36.066-00:03:39.133]然后这个名字的话还是随便比较test
[00:03:39.766-00:03:43.133]啊自定义值的话是使用这个use value
[00:03:43.366-00:03:45.899]OK那后面的话你可以跟随便
[00:03:45.900-00:03:48.366]比如说跟个数组对象
[00:03:48.400-00:03:50.266]数字number什么都行
[00:03:50.266-00:03:51.999]啊是你自定义的一个值
[00:03:52.000-00:03:54.600]比如说我们这跟一个数组吧
[00:03:54.666-00:03:55.766]啊比如说这个
[00:03:56.566-00:03:57.466]某宝
[00:03:59.166-00:04:00.299]啊某多多
[00:04:01.300-00:04:02.500]还有这个某东
[00:04:02.600-00:04:04.400]OK这是我们定义的一个值
[00:04:04.900-00:04:06.666]那么怎么去使用这个东西呢
[00:04:06.666-00:04:08.766]其实用法也是非常简单
[00:04:09.133-00:04:10.999]我们再把这个东西给它粘一下
[00:04:13.700-00:04:15.466]OK我们给它换个行
[00:04:16.933-00:04:19.333]然后这个名词的话我们叫这个so
[00:04:20.300-00:04:21.366]然后这个类型的话
[00:04:21.366-00:04:23.099]我们在这定义的是一个数组
[00:04:23.100-00:04:24.166]所以说来一个
[00:04:24.900-00:04:26.600]dream类型的array
[00:04:26.766-00:04:29.966]OK然后这个名字呢需要对应上叫test
[00:04:30.366-00:04:33.399]和这个inject啊对应上这样子就可以了
[00:04:33.933-00:04:36.299]然后这儿的话我们就直接点这个
[00:04:37.400-00:04:39.400]shop啊就可以了
[00:04:39.733-00:04:43.066]OK它会自动的帮我们去把这个数组呢
[00:04:43.066-00:04:44.999]做这个格式化的
[00:04:45.766-00:04:47.566]把这个类型给大家改一下啊
[00:04:48.200-00:04:50.366]OK对它会自动格式化
[00:04:50.700-00:04:51.566]我们来看一下
[00:04:52.266-00:04:54.066]啊就变成这样啊
[00:04:54.166-00:04:55.533]淘宝什么PDD
[00:04:55.533-00:04:58.499]就变成这种string string的形式了
[00:04:58.500-00:05:00.366]它会做一个接单键string fight
[00:05:00.600-00:05:02.733]然后给它输出到这个页面上
[00:05:02.733-00:05:05.866]OK那这个的话是一个自定义值
[00:05:05.866-00:05:07.533]然后我们来看第三个
[00:05:08.300-00:05:11.300]第三个的话是这个呃工厂模式
[00:05:11.566-00:05:15.399]工厂模式的话也是在这个module里边
[00:05:17.400-00:05:20.266]OK那同样还是定一个名字啊
[00:05:20.266-00:05:22.899]随便啊叫什么CCC
[00:05:24.133-00:05:26.799]工厂模式是通过这个use factory
[00:05:26.866-00:05:28.466]对是通过这个去定义的
[00:05:30.200-00:05:31.100]那在这个里边
[00:05:31.100-00:05:33.066]你可以自己去写些逻辑啊
[00:05:33.066-00:05:35.299]比如说if什么什么l什么什么
[00:05:35.333-00:05:37.933]然后呢去return这个不同的值
[00:05:37.966-00:05:40.766]或者是return这个不同的类啊
[00:05:40.766-00:05:41.566]这个是
[00:05:41.700-00:05:44.000]就是相当于一个函数模式的一个
[00:05:44.066-00:05:46.066]符类啊你可以在里边写
[00:05:46.266-00:05:48.066]当然它也可以比如说
[00:05:48.100-00:05:49.966]去依赖一些别的类
[00:05:50.766-00:05:52.333]咱们在这再粘一个吧
[00:05:52.700-00:05:56.066]对我就不使用那个nice J杠S了
[00:05:56.700-00:05:58.500]我就直接粘一个比较快
[00:06:04.000-00:06:04.300]OK
[00:06:04.300-00:06:06.400]然后我们把这个名字也给它变一下啊
[00:06:08.266-00:06:11.333]然后我们再给它引入一下这个a b series
[00:06:16.500-00:06:18.200]然后呢把它在这个private
[00:06:18.200-00:06:20.066]里边去给他做一下注入啊
[00:06:20.200-00:06:21.933]就给他插在这吧
[00:06:22.733-00:06:24.599]然后在这个工厂模式呢
[00:06:24.600-00:06:27.466]也可以通过inject给他们做这个
[00:06:27.733-00:06:29.133]服务类的关联关系啊
[00:06:29.866-00:06:31.399]OK把这个给它注进去
[00:06:31.866-00:06:33.199]这个注入完之后呢
[00:06:33.200-00:06:34.100]就可以在这个
[00:06:34.100-00:06:35.666]工厂函数的这个参数里边
[00:06:35.666-00:06:36.499]去读到
[00:06:36.533-00:06:37.566]就这个APP series
[00:06:39.200-00:06:40.466]对它就会传到这来
[00:06:40.466-00:06:42.133]就当一个参数给它传进来
[00:06:42.500-00:06:44.500]我们先随便retar一个东西
[00:06:44.500-00:06:45.900]然后我们可以打印一下啊
[00:06:48.800-00:06:49.866]这儿get哈喽
[00:06:51.500-00:06:53.566]然后这儿的话我们写一个什么
[00:06:55.933-00:06:57.899]啊就写一个APP 4S 2吧
[00:06:58.800-00:06:59.600]OK
[00:07:01.466-00:07:02.466]啊这的话我们保存一下
[00:07:02.466-00:07:04.133]然后把这个东西在一个地儿去
[00:07:04.133-00:07:05.133]给它去用一下
[00:07:05.133-00:07:06.333]还是在这个Ctrl
[00:07:07.266-00:07:08.399]我们再加一个啊
[00:07:09.533-00:07:10.599]这个是CCC
[00:07:12.133-00:07:13.866]啊名字也叫CCC吧
[00:07:13.900-00:07:16.466]然后它的它里边是这个
[00:07:17.000-00:07:17.800]一个number
[00:07:18.600-00:07:20.766]然后这个类型给它定义成这个number
[00:07:27.966-00:07:29.166]OK我们来保存一下
[00:07:30.200-00:07:31.600]好这没加逗号
[00:07:35.066-00:07:36.199]OK我们来刷新一下
[00:07:37.933-00:07:39.499]那这个123呢就返回了
[00:07:39.500-00:07:40.733]就是我们在这个
[00:07:40.933-00:07:43.599]motor里面自定义的这个工厂函数
[00:07:43.733-00:07:45.766]然后我们来看一下它这个对
[00:07:45.766-00:07:47.566]大家也可以看到这已经输出了
[00:07:47.766-00:07:50.199]APP series 2 就是把这个
[00:07:50.666-00:07:52.399]依赖的类呢也可以注入进来
[00:07:52.400-00:07:54.866]注入进来你可以在里边呢去做些逻辑
[00:07:55.000-00:07:57.600]那这个的话就是它的一个工厂模式
[00:07:58.166-00:07:59.566]当然这个工厂模式呢
[00:07:59.566-00:08:02.333]它也支持这种异步的一个方式
[00:08:03.733-00:08:05.866]就是你可以写一个a think
[00:08:06.533-00:08:08.599]然后在这来一个什么a wait
[00:08:08.700-00:08:10.900]比如说来一个promise
[00:08:14.766-00:08:16.066]啊是你有一个promise
[00:08:16.066-00:08:17.599]然后给它return出去就行了
[00:08:18.500-00:08:21.300]然后呢我们可以来个延迟sexy mot
[00:08:22.400-00:08:23.333]啊这样子
[00:08:27.400-00:08:29.000]给它延迟个2秒
[00:08:29.700-00:08:32.400]然后我们把这个东西呢给它返回去
[00:08:33.000-00:08:34.166]这儿get hello
[00:08:35.000-00:08:37.766]OK那这种方式呢它也是支持的啊
[00:08:37.766-00:08:39.266]一种这种异步的模式
[00:08:39.900-00:08:40.866]它会等2秒
[00:08:40.866-00:08:41.966]对上面会loading 2秒
[00:08:41.966-00:08:42.999]我们稍微等一下哎
[00:08:43.300-00:08:45.733]然后的话他就会把这个东西呢返回到
[00:08:45.866-00:08:47.299]这个页面上啊
[00:08:47.333-00:08:49.966]以上的话呢就是所有的一些这个
[00:08:50.266-00:08:51.899]氟类的一些使用方法



```validate
{
  "title": "请打开资源管理器中的项目",
  "tool": "run",
  "params": {
    "path":"/index.js"
  }
}
```{{active 00:00:13}}


```question
{
  "category": "checkbox",
  "title": "我们现在已经讲了Providers的几个知识点了，请回答",
  "options": [
    {
      "key": "A",
      "value": "基本用法"
    },
    {
      "key": "B",
      "value": "service 第二种用法(自定义名称)"
    },
    {
      "key": "C",
      "value": "自定义注入值"
    },
    {
      "key": "D",
      "value": "工厂模式"
    },
    {
      "key": "E",
      "value": "异步模式"
    }
  ],
  "selected": "A,B"
}
```{{active 00:05:02}}


```question
{
  "category": "radio",
  "title": "您觉得本课程对您进一步学习有帮助吗",
  "options": [
    {
      "key": "A",
      "value": "非常有帮助"
    },
    {
      "key": "B",
      "value": "有点帮助，但是不多"
    },
    {
      "key": "C",
      "value": "一点帮助都没有"
    }
  ],
  "selected": "A"
}
```{{active 00:08:00}}